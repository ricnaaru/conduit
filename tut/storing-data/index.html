<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>3. Storing Data in a Database - Conduit</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../style/css/override.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "3. Storing Data in a Database";
        var mkdocs_page_input_path = "tut/storing-data.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-41269877-2', 'aqueduct.io');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Conduit
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../index.md">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../core_concepts/">Core Concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../tour/">Tour</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../best_practices/">Best Practices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../intellij.md">IntelliJ IDEA Templates</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorial</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">1. Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../executing-queries/">2. Reading from a Database</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">3. Storing Data in a Database</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#http-resources-and-methods">HTTP Resources and Methods</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#inserting-data">Inserting Data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#request-and-response-bodies">Request and Response Bodies</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#response-body-encoding">Response Body Encoding</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#request-body-decoding">Request Body Decoding</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../writing-tests/">4. Configuration and Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oauth2/">5. Authentication and Authorization</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Snippets</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../snippets/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../snippets/http/">HTTP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../snippets/orm/">ORM</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../snippets/auth/">Authentication and Authorization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../snippets/test/">Testing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Application Configuration and Behavior</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../application/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../application/channel/">Starting and Stopping Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../application/configure/">Configuring an Application and its Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../application/structure/">Application and Project Structure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../application/threading/">Multi-threading</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Handling HTTP Requests</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/controller/">Handling Requests and Sending Response</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/request_and_response/">Serializing Request and Response Bodies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/routing/">Routing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/resource_controller/">Request Binding with Resource Controllers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/serving_files/">Serving Files and Caching</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/websockets/">Websockets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/file_upload/">Uploading Files</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Databases and ORM</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../db/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/connecting/">Connecting to a Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/modeling_data/">Modeling Data and Relationships</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/serialization/">Serialization and Deserialization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/executing_queries/">Basic Queries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/advanced_queries/">Advanced Queries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/transactions/">Transactions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/validations/">Validations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/db_tools/">Migration and Tooling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../db/json_columns/">JSON Document Storage</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Authorization and OAuth 2.0</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../auth/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/server/">Setting up Authorization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/authorizer/">Protecting Routes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/controllers/">Issuing Access Tokens</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/cli/">Managing OAuth 2.0 Clients</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/auth_scopes/">OAuth 2.0 Scoping</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../auth/what_is_oauth/">What is OAuth 2.0?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Development and Testing</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../testing/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../testing/tests/">Writing Tests</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../testing/mixins/">Testing with the ORM and OAuth 2.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../testing/debugger/">Using the Debugger</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../testing/clients/">Developing Client Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../testing/mock/">Mocking Services</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: OpenAPI Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../openapi/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../openapi/cli/">Creating an OpenAPI Document</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../openapi/components/">Documenting Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../openapi/endpoint/">Documenting Endpoint Controllers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../openapi/middleware/">Documenting Middleware Controllers</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Command-line Tooling</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../cli/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/create/">Creating Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/running/">Running Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cli/document/">Generating an OpenAPI/Swagger Specification</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guide: Deployment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../deploy/index.md">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/build/">Creating a Conduit Executable</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/deploy_local/">Deploy Locally (VM)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/deploy_docker/">Deploying with Docker and Kubernetes (VM)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/deploy_heroku/">Deploy on Heroku (VM)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/deploy_aws/">Deploy on AWS (VM)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deploy/script/">Deploying without aqueduct serve (VM)</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Conduit</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Tutorial &raquo;</li>
      <li>3. Storing Data in a Database</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/stablekernel/aqueduct/edit/docs/source/source/docs/tut/storing-data.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="storing-data-in-a-database">Storing Data in a Database</h1>
<p>In the previous exercise, we loaded some heroes into the database our application reads from. Now, we will allow our application to store, delete and modify heroes in the database. Before we embark on this part of the journey, it's important that we understand how an HTTP API is intended to work.</p>
<h2 id="http-resources-and-methods">HTTP Resources and Methods</h2>
<p>The <a href="https://tools.ietf.org/html/rfc7231">HTTP specification</a> defines the concept of a <em>resource</em>. A resource can be anything - a hero, a bank account, a light switch in your home, a temperature sensor in Antarctica, etc. Some of these things are physical objects (the light switch), and some are digital - and they are all resources. An HTTP server application is an interface to these resources; a client requests that something be done with a resource, and the server finds a way to get it done.</p>
<p>Resources are identified with a URI. A URI <em>universally identifies</em> a resource: it has the address of a server to connect to, and a path that identifies the resource on that server. When writing Conduit applications, we don't care much about the server part of a URL - the internet figures out that part. What we do care about is the path of the URL - like <code>/heroes</code>.</p>
<p>An application uses the URL path to determine which resource the request wants to work with. Right now, our application works with hero resources. A request with the path <code>/heroes/1</code> wants to do something with an individual hero (that is identified by the number <code>1</code>). A request with the path <code>/heroes</code> will act on the entire collection of heroes.</p>
<p>These actions are primarily described by the request method (like GET, POST, OR DELETE). Each of these methods has a general meaning that describes an action that can be applied to a resource. For example, a <code>GET /heroes</code> means "get me all of the hero resources". The meaning for each of these methods are as follows:</p>
<ul>
<li>GET: returns a collection of some resource or an individual resource</li>
<li>POST: inserts or appends a resource to a collection of some resource; a representation of the resource is in the request body</li>
<li>PUT: replaces a resource with the contents of the request body (or in some cases, replaces the entire collection of some resource)</li>
<li>DELETE: deletes a resource (or in some cases, deletes the entire collection of some resource)</li>
</ul>
<p>It turns out, we can create a lot of incredible behavior by just combining these methods and a request path. More importantly, by following these specifications, client applications can use generic libraries to access any HTTP API with very little effort. This allows us to create complex systems that are easily made available to a browser, mobile phone or any other internet-connected device.</p>
<h2 id="inserting-data">Inserting Data</h2>
<p>We'll start by adding behavior that allows for new heroes to be inserted into the database. Following our previous discussion, the HTTP request must take the form <code>POST /heroes</code> - we are appending a new hero to the collection of heroes. This request will contain the JSON representation of a hero in its body, for example:</p>
<pre class="codehilite"><code class="language-javascript">{
  &quot;name&quot;: &quot;Master of Conduits&quot;
}
</code></pre>

<p>Our <code>HeroesController</code> will handle this operation. In general, a single endpoint controller should handle every operation on a resource collection and its individual resources. In <code>heroes_controller.dart</code>, add the following operation method:</p>
<pre class="codehilite"><code class="language-dart">@Operation.post()
Future&lt;Response&gt; createHero() async {
  final Map&lt;String, dynamic&gt; body = await request.body.decode();
  final query = Query&lt;Hero&gt;(context)
    ..values.name = body['name'] as String;

  final insertedHero = await query.insert();

  return Response.ok(insertedHero);
}
</code></pre>

<p>There are three important things happening here: this method decodes the JSON object from the request's body, constructs a query that inserts a new hero with the name in the JSON object, and then returns the newly inserted hero in the response.</p>
<p>If the decoded body doesn't match the type of the variable or parameter it is being assigned to, a status code 400 exception is thrown. This means that decoding the body in this way checks that the body is the expected format and returns an error to the client on your behalf if it is not. For example, if someone posts a list of JSON objects, they will get a 400 Bad Request response because we expect a single JSON object in our method.</p>
<p>An insertion query sets the properties of its <code>values</code> object. The <code>values</code> object is an instance of the type being inserted. Invoking <code>insert</code> on a query inserts a row with its values. A new hero, with its primary key set by the database, is returned and returned as the body of the response. The generated SQL for the above would be something like:</p>
<pre class="codehilite"><code class="language-sql">INSERT INTO _Hero (name) VALUES ('Hero Name');
</code></pre>

<p>!!! tip "Column Attributes" The <code>id</code> of a hero is automatically generated because of its <code>@primaryKey</code> annotation. This annotation is a <code>Column</code> that configures the id to be both a primary key and be 'auto-incrementing'. Auto-incremented columns values are generated automatically (1, 2, 3...). See <a href="https://pub.dev/documentation/conduit/latest/conduit/Column-class.html">the API reference for Column</a> for column options.</p>
<p>Re-run your application. In the browser application, click on <code>Heroes</code> near the top of the page. Then, enter a name into the <code>Hero name:</code> field and click <code>Add</code>. The new hero will appear. You can re-run the application and that hero will still be available, because it has been stored in the database on your machine.</p>
<p><img alt="Insert Hero" src="../.gitbook/assets/run3%20%281%29%20%282%29.png" /></p>
<p>Assigning values one-by-one from a request body to a query is cumbersome. You can also auto-magically ingest a request body into a managed object and assign it to the <code>values</code> of a query:</p>
<pre class="codehilite"><code class="language-dart">@Operation.post()
Future&lt;Response&gt; createHero() async {
  final hero = Hero()
    ..read(await request.body.decode(), ignore: [&quot;id&quot;]);
  final query = Query&lt;Hero&gt;(context)..values = hero;

  final insertedHero = await query.insert();

  return Response.ok(insertedHero);
}
</code></pre>

<p>The <code>read</code> method reads a <code>Map&lt;String, dynamic&gt;</code> into a managed object. Each key's value is assigned to the property of the same name. The <code>ignore:</code> optional parameter removes values for that key from the map before reading it. You can also reject or require keys in this way. If a request body contains a key that isn't declared as property of the managed object, a 400 status code exception is thrown.</p>
<p>!!! tip "Sub-resources" We mentioned that a single controller should handle every operation for a resource collection and its individual resources. Some resources are complex enough that they can have sub-resources. For example, an organization of heroes (like the X-Men or Fantastic Four) contains heroes, but it might also contain buildings and equipment owned by the organization. The heroes, buildings and equipment are sub-resources of an organization. Each sub-resource should have its own route and controller instead of trying to shove everything into a single route and controller. See the following code snippet for an example.</p>
<pre class="codehilite"><code class="language-dart">@override
Controller get entryPoint {
  return Router()
    ..route(&quot;/organizations/[:orgName]&quot;)
      .link(() =&gt; OrganizationController());
    ..route(&quot;/organizations/:orgName/heroes/[:heroID]&quot;)
      .link(() =&gt; OrgHeroesController());
    ..route(&quot;/organizations/:orgName/buildings/[:buildingID]&quot;)
      .link(() =&gt; OrgBuildingController());
}
</code></pre>

<h2 id="request-and-response-bodies">Request and Response Bodies</h2>
<p>So far, we've largely glossed over how request and response bodies are handled, and now is a good time to dig in to this topic.</p>
<h3 id="response-body-encoding">Response Body Encoding</h3>
<p>When we create a response, we specify its status code and optionally its headers and body. For example, the following creates a response with a status code of 200 OK with an empty list body:</p>
<pre class="codehilite"><code class="language-dart">Response.ok([])
</code></pre>

<p>The first argument to <code>Response.ok</code> is a <em>body object</em>. A body object is automatically encoded according to the <code>contentType</code> of its response. By default, the content type of a response is <code>application/json</code> - so by default, all of our response body objects are JSON-encoded in the response body.</p>
<p>!!! note "Other Response Constructors" The default constructor for a <code>Response</code> takes a status code, map of headers and a body object: <code>Response(200, {}, "body")</code>. There are many named constructors for <code>Response</code>, like <code>Response.ok</code> or <code>Response.notFound</code>. These constructors set the status code and expose parameters that are intended for that type of response. For example, a 200 OK response should have a body, so <code>Response.ok</code> has a required body object argument. See <a href="https://pub.dev/documentation/conduit/latest/conduit/Response-class.html">the API reference for Response</a> for possible constructors and properties of a response.</p>
<p>To change the format a body object is encoded into, you set the <code>contentType</code> of the response. For example,</p>
<pre class="codehilite"><code class="language-dart">Response.ok([])
  ..contentType = new ContentType(&quot;application&quot;, &quot;xml&quot;);
</code></pre>

<p>The default supported content types are JSON, <code>application/x-www-form-urlencoded</code> and all <code>text/*</code> types. To encode other content-types, you must register a <code>Codec</code> with <code>CodecRegistry.</code> A body object is only valid if the codec selected by the response's content-type can encode it. If it can't, an error will be thrown and a 500 Server Error response is sent instead.</p>
<p>Types that implement <code>Serializable</code> may also be body objects. Objects that implement this type provide an <code>asMap()</code> method that converts their properties into a <code>Map</code> before being passed to the encoder. This <code>Map</code> must be encodable for the response's content-type codec. You may also provide a <code>List</code> of <code>Serializable</code>, for which the list of each object's <code>asMap()</code> is passed to the encoder.</p>
<p><code>ManagedObject</code> implements the <code>Serializable</code> interface, and therefore all managed objects (and lists of managed objects) can be body objects.</p>
<h3 id="request-body-decoding">Request Body Decoding</h3>
<p>Every <code>Request</code> has a <code>body</code> property of type <code>RequestBody</code>. A <code>RequestBody</code> decodes the contents of the request body into Dart objects that you use in your application. This decoding is performed by the <code>Codec</code> that is associated with the request's content-type. The decoded object is determined by the format of the data - for example, a JSON array decodes into a <code>List</code>, a JSON object into a <code>Map</code>.</p>
<p>When you write code to decode a request body, you are also validating the request body is in the expected format. For example, your <code>HeroesController</code> invokes <code>decode</code> like this:</p>
<pre class="codehilite"><code class="language-dart">Map&lt;String, dynamic&gt; body = await request.body.decode();
</code></pre>

<p>The <code>decode</code> method has a type argument that is inferred to be a <code>Map&lt;String, dynamic&gt;</code>. If the decoded body is not a <code>Map</code>, an exception is thrown that sends an appropriate error response to the client.</p>
<p>You may also bind the body of a request to an operation method parameter. Let's bind a <code>Hero</code> instance to a request body in our <code>HeroesController</code>. Update the code in that file to the following:</p>
<pre class="codehilite"><code class="language-dart">@Operation.post()
Future&lt;Response&gt; createHero(@Bind.body(ignore: [&quot;id&quot;]) Hero inputHero) async {
  final query = Query&lt;Hero&gt;(context)
    ..values = inputHero;

  final insertedHero = await query.insert();

  return Response.ok(insertedHero);
}
</code></pre>

<p>Values in the request body object are decoded into a <code>Hero</code> object - each key in the request body maps to a property of our <code>Hero</code>. For example, the value for the key 'name' is stored in the <code>inputHero.name</code>. If decoding the request body into a <code>Hero</code> instance fails for any reason, a 400 Bad Request response is sent and the operation method is not called.</p>
<p>!!! tip "Binding Serializables" A body can be bound to any type - a request will only succeed if the decoded body matches the expected type. When a <code>Serializable</code> subclass (or <code>List&lt;Serializable&gt;</code>) is bound to a body, it enforces the body to be decoded into a <code>Map&lt;String, dynamic&gt;</code> (or a <code>List&lt;Map&lt;String, dynamic&gt;&gt;</code>). All <code>ManagedObject</code>s implement <code>Serializable</code>, and therefore you may bind managed objects (and lists of such) using body binding.</p>
<p>Re-run your <code>heroes</code> application. On <a href="http://conduit-tutorial.conduit.dart.io">http://conduit-tutorial.conduit.dart.io</a>, click on the <code>Heroes</code> button on the top of the screen. In the text field, enter a new hero name and click <code>Add</code>. You'll see your new hero added to the list! You can shutdown your application and run it again and you'll still be able to fetch your new hero.</p>
<p><img alt="Conduit Tutorial Third Run" src="../.gitbook/assets/run3%20%281%29%20%281%29.png" /></p>
<p>!!! tip "Query Construction" Properties like <code>values</code> and <code>where</code> prevent errors by type and name checking columns with the analyzer. They're also great for speeding up writing code because your IDE will autocomplete property names. There is <a href="../../db/advanced_queries/">specific behavior</a> a query uses to decide whether it should include a value from these two properties in the SQL it generates.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../executing-queries/" class="btn btn-neutral float-left" title="2. Reading from a Database"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../writing-tests/" class="btn btn-neutral float-right" title="4. Configuration and Testing">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Built by Stable Kernel</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/stablekernel/aqueduct" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../executing-queries/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../writing-tests/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
